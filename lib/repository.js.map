{"version":3,"sources":["../src/repository.js"],"names":["client","transport","findAgentByTag","tag","query","findEndUserByEmailAndAgentTag","email","createAgent","nickname","endUserId","mutate","updateAgent","id"],"mappings":";;;;;;AAAA;;AACA;;AAEA,IAAMA,SAAS,iBAAU;AACvBC,aAAW,kCAAc,4DAAd;AADY,CAAV,CAAf;;AAIA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAACC,GAAD,EAAS;AAC9B,SAAOH,OAAOI,KAAP,yMAaH,EAAED,QAAF,EAbG,CAAP;AAcD,CAfD;;AAkBA,IAAME,gCAAgC,SAAhCA,6BAAgC,CAACC,KAAD,EAAQH,GAAR,EAAgB;AACpD,SAAOH,OAAOI,KAAP,uLASH,EAAED,QAAF,EAAOG,YAAP,EATG,CAAP;AAUD,CAXD;;AAaA,IAAMC,cAAc,SAAdA,WAAc,CAACJ,GAAD,EAAMK,QAAN,EAAgBC,SAAhB,EAA8B;AAChD,SAAOT,OAAOU,MAAP,6CAEyBP,GAFzB,sBAE6CK,QAF7C,uBAEuEC,SAFvE,0GAAP;AAWD,CAZD;;AAcA,IAAME,cAAc,SAAdA,WAAc,CAACC,EAAD,EAAKJ,QAAL,EAAkB;AACpC,SAAOR,OAAOU,MAAP,+CAE2BE,EAF3B,sBAE8CJ,QAF9C,qEAAP;AAQD,CATD;;kBAWe;AACbN,gCADa;AAEbG,8DAFa;AAGbE,0BAHa;AAIbI;AAJa,C","file":"repository.js","sourcesContent":["import { Lokka } from 'lokka'\nimport { Transport } from 'lokka-transport-http'\n\nconst client = new Lokka({\n  transport: new Transport('https://api.graph.cool/simple/v1/cixri1w220iji0121r8lr0n69')\n})\n\nconst findAgentByTag = (tag) => {  \n  return client.query(`\n  query findAgentByTag($tag: String!) {\n    Agent(tag: $tag) { \n      id\n      tag\n      nickname\n      endUser {\n        email\n      }\n    }\n    User(tag: $tag) {\n      id\n    }\n  }`, { tag })\n}\n\n\nconst findEndUserByEmailAndAgentTag = (email, tag) => {  \n  return client.query(`\n  query ($email: String!, $tag: String!) {\n    EndUser(email: $email) {\n      id\n      agents(filter: {tag: $tag}) {\n        id\n        nickname      \n      }\n    }\n  }`, { tag, email })\n}\n\nconst createAgent = (tag, nickname, endUserId) => {\n  return client.mutate(`\n  {\n    newAgent: createAgent(tag: \"${tag}\", nickname: \"${nickname}\", endUserId: \"${endUserId}\") {\n      id\n      updatedAt\n      nickname\n      endUser {\n        email\n      }\n    }\n  }`)\n}\n\nconst updateAgent = (id, nickname) => {\n  return client.mutate(`\n  {\n   updatedAgent: updateAgent(id: \"${id}\", nickname: \"${nickname}\") {\n      id\n      updatedAt    \n      nickname\n    }\n  }`)\n}\n\nexport default {\n  findAgentByTag,\n  findEndUserByEmailAndAgentTag,\n  createAgent,\n  updateAgent\n}"]}